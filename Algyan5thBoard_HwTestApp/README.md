# はじめに  
本プログラムは、IoT ALGYAN ５周年基板のハードウェアチェックソフトです。  
基板に部品をはんだ付け実装した後の動作チェックに使用いただけます。  

基板に実装したハードウェアが問題なく動作することを確認するための最低限の機能を実装したものです。

# 前提環境
前提条件として以下２つが設定出来ている事とします。  
・ Arduino IDE がインストールされていること。  
・ Arduino IDE のボードマネージャーに "ESP32" が登録されていること。  

ESP32 を Arduino IDE で書き込んだことがある人や、M5-Stack / Stick-C 等を使った事がある方はたぶん大丈夫ですが、それ以外の方は "esp32 arduino セットアップ" 等と検索して、あらかじめインストール・設定してください。

参考に Switch Science 様のサイトのリンクを載せておきますが、もっとわかりやすいページがあるかもしれません。  
<https://trac.switch-science.com/wiki/esp32_setup>

# 書き込み方法
1. USBシリアルケーブルを接続します。  
2. 電源(5V)を投入します。  
	3.3V のUSBシリアルしか持っていない人は書き込み時にも電源を投入してください。	USBシリアルから CN4-1pinに 5V を供給している場合は不要です。
3. 書き込みモードにします。  
	SW3 を押した状態で、SW2 を押して離すと書き込みモードになります。
4. Arduino IDE から以下のように操作して書き込みます。  
	- [ツール] - [ボード] - "ESP32 Dev Module" を選択する。  
	- [ツール] - [シリアルポート] で COMポートを選択する。  
	- [スケッチ] - [マイコンボードに書き込む]  
	- 一番下の窓に以下のように表示されたら完了です。  

~~~
Hash of data verified.

Leaving...
Hard resetting via RTS pin...
~~~
5. 自動リセットの仕組みは実装されていないので SW2(RESET) を押す。

# 動作確認方法
* SW2 + SW3  
	プログラムを書き込める事が動作確認になります。
	書き込みができない（書き込みモードにならない）場合はこの二つのスイッチ周りに問題があると思われます。
* WiFi機能  
	[ツール] - [シリアルモニター]  左下のボーレート設定は 115200bps 
	この状態でリセットすると、周りにあるWiFiのアクセスポイントをスキャンして結果をシリアルモニタに表示します。
* LED + SW1 + ブザー  
	SW1を押すとブザーにてキー操作音が鳴ります。
	また、LED の消灯・点灯 状態を切り替えます。
* 明るさセンサー(CDS) + サーボモーター  
	CDSセンサーに懐中電灯などの光をあててみてください。  
	暗い場所で 0°明るい場所で180°まで、サーボモータの角度が変わります。  
	また、SW1 を押し LEDが点灯している状態で、シリアルにはセンサーの値を出力しています。  
    シリアルモニターを一旦閉じてシリアルプロッターを開くとグラフが表示されます。

# 利用について
再配布・改変・これをベースにした開発等、ご自由にどうぞ。
